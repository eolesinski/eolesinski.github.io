<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> PoliSciPy | Ethan Olesinski </title> <meta name="author" content=" Ethan Olesinski"> <meta name="description" content="an open-source Python package for psephologists"> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/assets/img/favicon.ico?8c73076099d006d4040f1d71698da516"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://eolesinski.github.io/projects/1_project/"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?bf50d6d9dd867d3e0f3b0add94449649"></script> </head> <body class="fixed-top-nav sticky-bottom-footer"> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> Ethan Olesinski </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item active"> <a class="nav-link" href="/projects/">projects <span class="sr-only">(current)</span> </a> </li> <li class="nav-item "> <a class="nav-link" href="/assets/pdf/resume.pdf">resume </a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">submenus </a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item " href="/publications/">publications</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/projects/">projects</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/blog/">blog</a> </div> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fa-solid fa-moon"></i> <i class="fa-solid fa-sun"></i> </button> </li> </ul> </div> </div> </nav> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">PoliSciPy</h1> <p class="post-description">an open-source Python package for psephologists</p> </header> <article> <p>PoliSciPy is an open-source Python package for psephologists. It makes it easy to perform a wide range of analysis using election data. For example, you can easily construct high-quality electoral college maps by simply passing in a single data column.</p> <p>This Python package improves upon the geoStates package by adding additional features and rewriting its core functional logic. The key to simplifying the code required for generating these maps involves using the <a href="https://www.arcgis.com/index.html" rel="external nofollow noopener" target="_blank">ArcGIS</a> geospatial data software to edit shapefiles provided by the U.S. Census Bureau.</p> <p>We then perform the following geometric transformations to the state polygons for Alaska and Hawaii after moving them to a more easily visible location:</p> <div class="row justify-content-center"> <div class="col-sm-6 mt-3 mt-md-0"> \[ Hawaii = \begin{bmatrix} x' \\ y' \end{bmatrix} = \begin{bmatrix} 1.1 &amp; 0 \\ 0 &amp; 1.0 \end{bmatrix} * \begin{bmatrix} x \\ y \end{bmatrix} \] </div> <div class="col-sm-6 mt-3 mt-md-0"> \[ Alaska = \begin{bmatrix} x' \\ y' \end{bmatrix} = \begin{bmatrix} 0.62 &amp; 0 \\ 0 &amp; 1.0 \end{bmatrix} * \begin{bmatrix} x \\ y \end{bmatrix} \] </div> </div> <p>The figure below shows a Jupyter notebook illustrating how a geometric transformation is applied to a state’s multipolygon once it has been edited in ArcGIS. To make sure that the transformation is applied to the entire shape, a lambda function is used to apply the scale factor to each of the polygon’s coordinates.</p> <div class="row justify-content-sm-center"> <div class="col-sm-8 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/alaska-480.webp 480w,/assets/img/alaska-800.webp 800w,/assets/img/alaska-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/alaska.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="example image" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm-4 mt-3 mt-md-0"> </div> </div> <div class="caption"> The application of a geometric transformation to a multipolygon in a Jupyter Notebook. </div> <p>Once the geometric transformations are applied, the only thing left to do is add the labels for each of the states. Editing the shapefile in ArcGIS allowed for the addition of a <code class="language-plaintext highlighter-rouge">x_centroid</code> and <code class="language-plaintext highlighter-rouge">y_centroid</code> column directly to the shapefile so that each state label could be displayed in the center of its respective multipolygon.</p> <div class="row"> <div class="col-md-7"> <p>PoliSciPy also includes a custom colormap for displaying commonly used electoral map colors. This partisan color scheme can be used to represent the political leaning or relative competitiveness of a particular state.</p> </div> <div class="col-md-5"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/colormap_2-480.webp 480w,/assets/img/colormap_2-800.webp 800w,/assets/img/colormap_2-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/colormap_2.png" class="img-fluid" width="100%" height="auto" title="example image" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>Without using the PoliSciPy package, creating an electoral college map using GeoPandas and matplotlib would require multiple steps. These steps would include, <em>inter alia</em>, creating the plot, moving the states, adding labels, creating a custom color map, and displaying a total results bar.</p> <p>An example of some of the code that would be required:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Create a figure and axis
</span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="nf">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>

<span class="c1"># Create a custom colormap for red, blue, and light gray
</span><span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="sh">'</span><span class="s">#4875b1</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">lightgray</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">#b82b2b</span><span class="sh">'</span><span class="p">]</span>
<span class="n">cmap</span> <span class="o">=</span> <span class="nc">ListedColormap</span><span class="p">(</span><span class="n">colors</span><span class="p">)</span>

<span class="c1"># Plot the choropleth map
</span><span class="n">gdf_election_c</span><span class="p">.</span><span class="nf">plot</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="sh">'</span><span class="s">winning_party</span><span class="sh">'</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">,</span> <span class="n">categorical</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                    <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="sh">'</span><span class="s">white</span><span class="sh">'</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="p">.</span><span class="mi">5</span><span class="p">)</span>
</code></pre></div></div> <p>Using the PoliSciPy package makes this entire process simpler by only requiring a single function call to generate a full electoral college map of the United States. The user only needs to pass through one parameter - a column containing the election results - to generate the plot.</p> <p>An example of an electoral college map created using the PoliSciPy package is shown below:</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/electoral_college-480.webp 480w,/assets/img/electoral_college-800.webp 800w,/assets/img/electoral_college-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/electoral_college.png" class="img-fluid" width="100%" height="auto" title="example image" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Example electoral college map created using the PoliSciPy Python package. </div> </article> </div> </div> <footer class="sticky-bottom mt-5" role="contentinfo"> <div class="container"> © Copyright 2024 Ethan Olesinski. <br>Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Last updated: May 30, 2024. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script defer src="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?2930004b8d7fcd0a8e00fdcfc8fc9f24"></script> <script defer src="/assets/js/common.js?4a129fbf39254905f505c7246e641eaf"></script> <script defer src="/assets/js/copy_code.js?7254ae07fe9cc5f3a10843e1c0817c9c" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> </body> </html>